# Time-Tracker-MCP-Tool

**Time Tracker MCP (Model Context Protocol) Tool** designed to provide AI coding assistants (such as GitHub Copilot) with the ability to query the current system time and track execution time for Milestone/Task workflows. This enables accurate execution reports with real wall-clock timestamps and durations.

---

## Problem Statement

AI coding assistants currently lack the ability to:

1. **Query the current system time** — Cannot determine when tasks start or end
2. **Track elapsed time** — Cannot measure how long operations take
3. **Generate accurate execution reports** — Must rely on user-provided timestamps or generate simulated/estimated durations

---

## Features

### V1: Basic Time Query (Stateless)
- `time_get_current` — Query current system time with format and timezone options

### V2: Session-Based Tracking (Stateful)
- `time_session_start` — Initialize milestone tracking session
- `time_task_start` — Mark task start (idempotent)
- `time_task_end` — Mark task completion with duration
- `time_session_end` — End session and return summary
- `time_session_summary` — Get status without ending session

---

## Technology Stack

- **.NET 10** — Latest LTS runtime
- **ModelContextProtocol.Server** — Official C# MCP SDK from Microsoft
- **In-memory storage** — ConcurrentDictionary for session state
- **Streamable HTTP Transport** — Standard MCP server hosting

---

## Quick Start

### Prerequisites

- [.NET 10 SDK](https://dotnet.microsoft.com/download/dotnet/10.0)

### Build and Run

```bash
# Clone the repository
git clone https://github.com/Rebel-Alliance-2023/Time-Tracker-MCP-Tool.git
cd Time-Tracker-MCP-Tool

# Build
dotnet build

# Run tests
dotnet test

# Run the MCP server
dotnet run --project src/TimeTrackerMcp/TimeTrackerMcp.csproj
```

---

## Registration

### Visual Studio 2026

Visual Studio 2026 with GitHub Copilot supports MCP server registration. Follow these steps:

#### Option 1: Via Visual Studio Options (Recommended)

1. Open Visual Studio 2026 (Preview 3 or later)
2. Go to **Tools** > **Options** > **GitHub Copilot** > **MCP Servers**
3. Click **Add Server**
4. Configure the server:
   - **Name:** `time-tracker`
   - **Command:** `dotnet`
   - **Arguments:** `run --project "C:\path\to\Time-Tracker-MCP-Tool\src\TimeTrackerMcp\TimeTrackerMcp.csproj"`
   - **Working Directory:** `C:\path\to\Time-Tracker-MCP-Tool`
5. Click **OK** to save
6. Restart Visual Studio to apply changes

**Using Published Executable (Recommended for Production):**

For faster startup, use the published single-file executable instead:

1. Publish the project:
   ```bash
   dotnet publish src/TimeTrackerMcp/TimeTrackerMcp.csproj -c Release -r win-x64 --self-contained true -o publish/win-x64
   ```

2. Configure in Visual Studio:
   - **Name:** `time-tracker`
   - **Command:** `C:\path\to\publish\win-x64\TimeTrackerMcp.exe`
   - **Arguments:** (leave empty)
   - **Working Directory:** `C:\path\to\publish\win-x64`

#### Option 2: Via mcp.json in Solution Directory

Create an `mcp.json` file in your solution directory (next to your `.sln` or `.slnx` file):

```json
{
  "servers": {
    "time-tracker": {
      "type": "stdio",
      "command": "dotnet",
      "args": [
        "run",
        "--project",
        "C:/path/to/Time-Tracker-MCP-Tool/src/TimeTrackerMcp/TimeTrackerMcp.csproj"
      ],
      "env": {}
    }
  }
}
```

**For published executable:**

```json
{
  "servers": {
    "time-tracker": {
      "type": "stdio",
      "command": "C:/path/to/publish/win-x64/TimeTrackerMcp.exe",
      "args": [],
      "env": {}
    }
  }
}
```

Visual Studio will automatically detect and load MCP servers defined in `mcp.json` when you open the solution.

#### Option 3: Via User-Level Configuration

For global availability across all solutions, add to your user profile:

1. Open `%APPDATA%\Microsoft\VisualStudio\17.0_<hash>\Settings\MCPServers.json`
2. Add the server configuration (create file if it doesn't exist):

```json
{
  "servers": {
    "time-tracker": {
      "type": "stdio",
      "command": "C:/path/to/publish/win-x64/TimeTrackerMcp.exe",
      "args": [],
      "env": {}
    }
  }
}
```

#### Verifying Registration

After registration, you can verify the tool is available by asking Copilot:
- "What time is it?" (should invoke `time_get_current`)
- "Start a session for milestone M1" (should invoke `time_session_start`)

### VS Code

Add to `.vscode/mcp.json` in your workspace:

```json
{
  "servers": {
    "time-tracker": {
      "command": "dotnet",
      "args": ["run", "--project", "path/to/TimeTrackerMcp.csproj"],
      "env": {}
    }
  }
}
```

Alternatively, add to your user profile for global availability:
1. Open Command Palette (`Ctrl+Shift+P`)
2. Run **Preferences: Open User Settings (JSON)**
3. Add the MCP server configuration under `"github.copilot.chat.mcpServers"`

---

## Usage Example

```
AI: [calls time_session_start]
    milestone_id: "M2"
    task_ids: ["M2-001", "M2-002", "M2-003"]
    => session_id: "abc123..."

    [calls time_task_start] task_id: "M2-001"
    ... implements task ...
    [calls time_task_end] task_id: "M2-001"
    => Duration: 1 minute 13 seconds

    [calls time_session_end]
    => Total Duration: 5 minutes 42 seconds
    => Tasks Completed: 3/3
```

---

## Project Structure

```
Time-Tracker-MCP-Tool/
|-- src/
|   +-- TimeTrackerMcp/
|       |-- TimeTrackerMcp.csproj
|       |-- Program.cs
|       |-- Tools/
|       |   +-- TimeTools.cs
|       |-- Services/
|       |   |-- ISessionService.cs
|       |   |-- InMemorySessionService.cs
|       |   +-- ITimeProvider.cs
|       +-- Models/
|           |-- Session.cs
|           |-- TaskRecord.cs
|           +-- TimeResult.cs
|-- tests/
|   +-- TimeTrackerMcp.Tests/
|       |-- TimeTrackerMcp.Tests.csproj
|       +-- TimeToolsTests.cs
|-- docs/
|   |-- Time Tracker MCP Tool Specification.md
|   |-- Implementation Plan - Time Tracker MCP Tool.md
|   +-- Time Tracker MCP Tool - Task List.md
|-- .vscode/
|   +-- mcp.json
|-- .github/
|   +-- workflows/
|       +-- build.yml
|-- README.md
+-- LICENSE
```

---

## Documentation

- [Specification](docs/Time%20Tracker%20MCP%20Tool%20Specification.md) — Detailed requirements and API schemas
- [Implementation Plan](docs/Implementation%20Plan%20-%20Time%20Tracker%20MCP%20Tool.md) — Architecture and milestones
- [Task List](docs/Time%20Tracker%20MCP%20Tool%20-%20Task%20List.md) — Granular work breakdown

---

## References

- [MCP Specification](https://modelcontextprotocol.io/specification/2025-06-18/basic/transports)
- [Official C# MCP SDK](https://github.com/modelcontextprotocol/csharp-sdk)
- [VS Code MCP Servers](https://code.visualstudio.com/docs/copilot/customization/mcp-servers)

---

## License

MIT License — See [LICENSE](LICENSE) for details.
